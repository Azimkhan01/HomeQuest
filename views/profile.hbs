<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>HomeQuest</title>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
            integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="../public/CascadingStyle/navbar.css">
        <link rel="stylesheet" href="../public/CascadingStyle/profile.css">
    </head>
    <body>
        {{>navbar}}
        {{!-- information start --}}
        <div id="information">

            {{#if imgStatus}}
            <div id="image"  class="image-container">
                <img src={{src}} alt="Profile Image">
            </div>
            {{else}}
            <div id="image">
                <img
                    src="/public/Assets/Default/defaultimage-removebg-preview.png"
                    alt="Default Image">
            </div>
            {{/if}}
<div id="upload">
    <div id="hideUploadImage" onclick="handleImage()"> <i id="hide"
                        {{!-- onclick="handleHide()" --}}
                        class="fa-solid fa-xmark"></i></div>
    <form method="post" action="/profile/image" enctype="multipart/form-data">
        <input type="file" name="image" accept="image/*" required>
        <button type="submit">Upload Image</button>
    </form>
</div>

            <div id="personalInformation">
                <h1>Personal Information</h1>
                <p>Name: {{name}}</p>
                <p>Email: {{email}}</p>
                <p>Phone: {{phone}}</p>
                <form>
                    <button type="button" class="reset-button"
                        onclick="handleEdit()">Edit
                        Details</button>
                </form>
            </div>
            <div id="form">
                <div id="hideProfile"> <h1>Edit Profile</h1> <i id="hide"
                        onclick="handleHide()"
                        class="fa-solid fa-xmark"></i></div>
                <br>
                <form method="post" action="/profile/edit-details">
                    <input type="text" name="name" placeholder="Name" required>
                    <input type="text" name="phone" placeholder="Phone"
                        required>
                    <input type="submit" />
                </form>
                <br>
                <br>
                <p style="color: {{color}};">{{error}}</p>

            </div>

            <div id="account-details">
                <h1>Account Details</h1>
                <p>Username: {{username}}</p>
                <form>
                    <button type="button" class="reset-button"
                        onclick="showReset()">Reset
                        Password</button>
                </form>
                <p id="externalerror" style="color: {{color1}};">{{error2}}</p>
                <p style="color: tomato;" id="internalerror"></p>
            </div>

            <div id="reset-password">
                <div id="hideProfile"><h2>Reset Password</h2> <i
                        class="fa-solid fa-xmark" id="hide"
                        onclick="handlePassword()"></i></div>
                <form method="post" action="/profile/reset-password">
                    <input id="old-password" type="password" id="old-password"
                        name="old-password" placeholder="Old Password" required>
                    <input id="new-password" type="password" id="new-password"
                        placeholder="new Password" required>
                    <input id="confirm-password" type="password"
                        id="confirm-password" name="confirm-password"
                        placeholder="Confirm New Password" required>
                    <button id="resetpasswordbtn" type="submit">Reset
                        Password</button>
                </form>
                
            </div>

            <div id="user-listings">
                <h1>Your Listings</h1>
                <div class="listings-container">
                    {{#each listings}}
                    <div class="listing-item">
                        <img style="height: 200px;width: 200px;" src={{this.thumbnail}} alt="{{this.title}}">
                        <div>
                        <a href="#"><h2>{{this.title}}</h2></a>
                        <p>Price: {{this.price}}</p>
                        <p>Location: {{this.location}}</p></div>
                        <form action="/delete-listing/{{this._id}}"  method="get" >
                        <input type="submit" value="Delete"></form>
                    </div>
                    {{else}}
                    <p>No listings available.</p>
                    {{/each}}
                </div>
            </div>

            <div id="logout">
                {{!-- <h1>Logout</h1> --}}
                <form method="get" action="/profile/logout">
                    <button type="submit" class="logout-button">Logout</button>
                </form>
            </div>

        </div>
        {{!-- information end --}}
    <div id="fullScreenImage">
        
        <div><img id="fullImage" alt="here" src="" ></div>
    </div>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/js/regular.min.js"
            integrity="sha512-kOmvRi+0imoekwslOzP/X1LXQnzcttzqYYt3urKD4nhd5fMYwRfXgDS5Nh7b7pQjKPjBPSX9PmhCLrkfkxUcBQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="../public/Script/navbar.js"></script>
        <script src="../public/Script/profile.js"></script>
    </body>
</html>
